import{u as w,j as e,B as l,L as o,I as d,C as p,a as h,b as y,c as C,d as D,e as _}from"./index-8HvWlEO9.js";import{r as u,P as E,e as g,E as B}from"./vendor-ui-BfR-HH66.js";import{D as T,a as I,b as k,c as P,d as F,e as R,f as S}from"./dialog-BJngghRx.js";import{T as L}from"./textarea-Dzc1DlSm.js";import{f as O}from"./vendor-date-OvfWL3xb.js";import{p as z}from"./pt-BR-nHefkTwq.js";import"./vendor-react-CRB3T2We.js";function K({dashboards:m,onViewReport:x,onAddDashboard:r}){const{user:i}=w(),n=(i==null?void 0:i.role)==="admin",[j,c]=u.useState(!1),[a,t]=u.useState({title:"",description:"",embed_url:"",company_id:""}),v=s=>{try{return O(new Date(s),{addSuffix:!0,locale:z})}catch{return"Data indisponível"}},N=()=>{!a.title||!a.embed_url||(r==null||r({title:a.title,description:a.description,embed_url:a.embed_url,company_id:a.company_id||(i==null?void 0:i.company_id)||""}),t({title:"",description:"",embed_url:"",company_id:""}),c(!1))};return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Dashboards"}),e.jsx("p",{className:"text-slate-600 text-lg",children:n?"Gerencie e visualize todos os relatórios":"Acesse seus relatórios de trade marketing"})]}),n&&r&&e.jsxs(T,{open:j,onOpenChange:c,children:[e.jsx(I,{asChild:!0,children:e.jsxs(l,{className:"bg-[#2563EB] hover:bg-[#1d4ed8]",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Novo Relatório"]})}),e.jsxs(k,{children:[e.jsxs(P,{children:[e.jsx(F,{children:"Adicionar Novo Relatório"}),e.jsx(R,{children:"Configure um novo dashboard do Power BI para um cliente."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"title",children:"Título *"}),e.jsx(d,{id:"title",placeholder:"Ex: Performance de Vendas - Janeiro",value:a.title,onChange:s=>t({...a,title:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Descrição"}),e.jsx(L,{id:"description",placeholder:"Descreva o conteúdo deste relatório...",value:a.description,onChange:s=>t({...a,description:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"embed_url",children:"URL do Iframe (Power BI) *"}),e.jsx(d,{id:"embed_url",placeholder:"https://app.powerbi.com/view?r=...",value:a.embed_url,onChange:s=>t({...a,embed_url:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"company_id",children:"ID da Empresa (opcional)"}),e.jsx(d,{id:"company_id",placeholder:"Deixe vazio para empresa atual",value:a.company_id,onChange:s=>t({...a,company_id:s.target.value})})]})]}),e.jsxs(S,{children:[e.jsx(l,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),e.jsx(l,{className:"bg-[#2563EB] hover:bg-[#1d4ed8]",onClick:N,disabled:!a.title||!a.embed_url,children:"Adicionar"})]})]})]})]}),m.length===0?e.jsx(p,{className:"text-center py-12",children:e.jsxs(h,{children:[e.jsx(g,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-slate-600 mb-2",children:"Nenhum relatório disponível"}),e.jsx("p",{className:"text-slate-500",children:n?"Comece adicionando um novo relatório usando o botão acima.":"Entre em contato com seu gerente de conta para solicitar acesso aos relatórios."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(s=>{const f=s.created_at||s.last_updated||new Date().toISOString();return e.jsxs(p,{className:"group hover:shadow-lg transition-all duration-200 border-2 hover:border-[#2563EB]/30 cursor-pointer rounded-xl shadow-sm",onClick:()=>x(s.id),children:[e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-[#2563EB]/10 rounded-xl flex items-center justify-center group-hover:bg-[#2563EB] transition-colors",children:e.jsx(g,{className:"w-6 h-6 text-[#2563EB] group-hover:text-white transition-colors"})}),e.jsx(C,{variant:"secondary",className:"text-xs",children:v(f)})]}),e.jsx(D,{className:"text-xl group-hover:text-[#2563EB] transition-colors",children:s.title}),s.description&&e.jsx(_,{className:"line-clamp-2 min-h-[40px]",children:s.description})]}),e.jsx(h,{children:e.jsxs(l,{className:"w-full bg-[#2563EB] hover:bg-[#1d4ed8] group-hover:shadow-md transition-all",onClick:b=>{b.stopPropagation(),x(s.id)},children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Visualizar Relatório"]})})]},s.id)})})]})}export{K as DashboardsView};
